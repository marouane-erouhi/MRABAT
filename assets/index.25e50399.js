var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,r=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&s(e,a,t[a]);if(o)for(var a of o(t))l.call(t,a)&&s(e,a,t[a]);return e};"undefined"!=typeof require&&require;import{u as c,r as i,R as m,F as u,L as d,S as p,a as h,b,c as E,B as g}from"./vendor.b15fb4c2.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();function f(){const e=c(),[o,n]=i.exports.useState({value:!1,text:""}),l=e.location.state;let s={schoolName:"",about:"",admission:"",location:""};l&&(s={schoolName:l.name||"",about:l.about||"",admission:l.admission||"",location:l.location||""});return m.createElement("div",{className:"new-school-form"},m.createElement("h1",null,"Add a School"),o.value&&m.createElement("h2",{className:"failed-popup"},o.text),m.createElement(u,{initialValues:(d=r({},s),p={images:""},t(d,a(p))),onSubmit:l?async(t,{setSubmitting:a})=>{a(!0);(await(async(e,t,a)=>{const o=new FormData;""!=a&&o.append("images",a,`${a.name}`),o.append("oldName",e),o.append("schoolName",t.schoolName),o.append("about",t.about),o.append("location",t.location),o.append("admission",t.admission);const n={method:"PATCH",headers:{"Access-Control-Allow-Origin":"*"},body:o};return await fetch("http://35.232.171.144:5000/school",n).then((e=>e.json())).catch((()=>({error:{message:"Unable to connect to server. Please try again"}})))})(l.name,t,t.images)).success?e.push("/"):(n({value:!0,text:"A school by that name thosen't exists"}),setTimeout((function(){n({value:!1,text:""})}),3e3)),a(!1)}:async(t,{setSubmitting:a})=>{a(!0);(await(async e=>{const t=new FormData;t.append("images",e.images,`${e.images.name}`),t.append("schoolName",e.schoolName),t.append("about",e.about),t.append("location",e.location),t.append("admission",e.admission);const a={method:"POST",headers:{"Access-Control-Allow-Origin":"*"},body:t};return await fetch("http://35.232.171.144:5000/school",a).then((e=>e.json())).catch((()=>({error:{message:"Unable to connect to server. Please try again"}})))})(t)).success?e.push("/"):(n({value:!0,text:"A school with that name is already present"}),setTimeout((function(){n({value:!1,text:""})}),3e3)),a(!1)}},(({values:e,errors:t,touched:a,handleChange:o,handleBlur:n,handleSubmit:l,isSubmitting:s,setFieldValue:r})=>m.createElement("form",{onSubmit:l},m.createElement("label",{htmlFor:"img"},"Select image:"),m.createElement("input",{type:"file",id:"image",name:"image",accept:"image/*",onChange:e=>{r("images",e.currentTarget.files[0])}}),m.createElement("label",{htmlFor:"schoolName"},"School name:"),m.createElement("input",{id:"schoolName",value:e.schoolName,onChange:o}),m.createElement("label",{htmlFor:"about"},"About:"),m.createElement("textarea",{id:"about",name:"about",rows:"4",cols:"50",value:e.about,onChange:o}),m.createElement("label",{htmlFor:"location"},"Location:"),m.createElement("textarea",{id:"location",name:"location",rows:"4",cols:"50",value:e.location,onChange:o}),m.createElement("label",{htmlFor:"admission"},"Admission:"),m.createElement("textarea",{id:"admission",name:"admission",rows:"4",cols:"50",value:e.admission,onChange:o}),m.createElement("button",{className:"submit-btn",type:"submit",disabled:s},s?m.createElement("div",{style:{fontSize:"24px"},className:"lds-facebook"},m.createElement("div",null),m.createElement("div",null),m.createElement("div",null)):"Submit")))));var d,p}function y(e){const{name:t,about:a,location:o,imageUrl:n,admission:l}=e,s=c();return m.createElement("div",{className:"school"},m.createElement("div",{className:"image"},m.createElement("img",{width:"150",src:n,alt:"school image"})),m.createElement("div",{className:"body"},m.createElement("h2",null,t),m.createElement("p",null,a),m.createElement("p",null,"Location: ",o),m.createElement("p",null,"Admission: ",l),m.createElement("button",{onClick:t=>{s.push("/new-school",r({},e))}},"Update")))}function v(){const[e,t]=i.exports.useState([]);i.exports.useEffect((()=>{a()}),[]);const a=e=>{(async()=>await fetch("http://35.232.171.144:5000/school",{method:"GET",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}).then((e=>e.json())).catch((()=>({error:{message:"Unable to connect to server. Please try again"}}))))().then((e=>{console.log(e),t(e.schools)}))};return m.createElement("div",null,m.createElement(d,{className:"create-button",to:"/new-school"},"Create new School"),m.createElement("h3",null,"All Schools"),m.createElement("div",{className:"all-schools"},e.map((e=>m.createElement(y,r({key:e.name},e))))))}function w(){return m.createElement("div",{className:"App"},m.createElement(p,null,m.createElement(h,{exact:!0,path:"/new-school",component:f}),m.createElement(h,{exact:!0,path:"/",component:v}),m.createElement(h,{path:"*"},m.createElement(b,{to:"/"}))))}E.render(m.createElement(m.StrictMode,null,m.createElement(g,null,m.createElement(w,null))),document.getElementById("root"));
